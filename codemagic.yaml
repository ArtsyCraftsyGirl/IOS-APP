workflows:
  ios-workflow:
    name: iOS Build
    environment:
      xcode: latest
    scripts:
      - name: Install Dependencies
        script: |
          npm install  # Install any Node.js dependencies if needed
      - name: Build the Cordova app
        script: |
          # Navigate to the iOS platform directory
          cd platforms/ios
          
          # Clean the build folder to remove any previous builds
          xcodebuild clean

          # Build the Cordova app
          xcodebuild -workspace JbPaladinPatriotsClock.xcworkspace -scheme JbPaladinPatriotsClock -configuration Release -archivePath build/JbPaladinPatriotsClock.xcarchive archive
          
          # Export the IPA file
          xcodebuild -exportArchive -archivePath build/JbPaladinPatriotsClock.xcarchive -exportPath build -exportOptionsPlist exportOptions.plist
    artifacts:
      - platforms/ios/build/*.ipa
