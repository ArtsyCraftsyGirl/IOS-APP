workflows:
  build_ios:
    name: Build iOS App
    environment:
      xcode: latest  # Use the latest stable version of Xcode
      node: "14"  # Specify the Node.js version you want to use (adjust as needed)
    scripts:
      - name: Install Dependencies
        script: |
          npm install  # Install npm packages
          npm install -g cordova  # Install Cordova globally
          cordova platform add ios  # Add iOS platform if not added yet
      
      - name: Build iOS
        script: |
          cordova build ios --release --device  # Build a release version of the iOS app

      - name: Export IPA
        script: |
          mkdir -p output  # Create an output directory to store the IPA file
          cp -R platforms/ios/build/device/*.ipa output/  # Copy the generated IPA file to the output directory

artifacts:
  - output/*.ipa  # Specify the path to the IPA files generated
